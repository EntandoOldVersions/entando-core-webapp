!function(){var a=ENTANDO_MODEL_VOCABULARY,b=function(a,b){return-1==a.indexOf(b)&&a.push(b),a},c=function(a,c){for(var d=0,e=c.length;e>d;d++)b(a,c[d]);return a},d=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]="array"==typeof a[b]?d(a[b]):a[b];return c},e=function(a){if(!a.somethingSelected()){var b=a.getCursor(!1),c=a.getLine(b.line);b.end=c.length;var d=a.getTokenAt(b);d.state=CodeMirror.innerMode(a.getMode(),d.state).state;var e=f(c.substring(0,b.ch),b.ch),h={start:d.start,end:d.end},i=e[e.length-1];if(1==e.length&&"/"==i&&(h.start=b.ch,h.end=b.end),1!=e.length){var j=0;"/"==i&&(j=1),h.start=b.ch-e[e.length-1].length+j,h.end=b.end}return{list:g(e,a.getValue()),from:CodeMirror.Pos(b.line,h.start),to:CodeMirror.Pos(b.line,h.end)}}},f=function(a,b){void 0===a&&(a=""),"number"!=typeof b&&(b=a.length);var c=[],d=["()","$","#"],e=0,f=0;for(f=b-1;f>0;--f){var g=a.charAt(f),h=a.charAt(f+1);if(void 0===g)break;if("."==g&&"."==h){e=f+1+1;break}var i=0,j=d.some(function(b){return 1==b.length?g==b:a.substring(f-b.length+1,f+1)==b?(i=b.length-1,!0):a.substring(f,f+b.length)==b?!0:void 0});if(i>0)f-=i,g=a[f],h=a.charAt(f+1);else if("."!=g&&!/^\w$/.test(g)&&!j){if(e=f+1,void 0!==h){var k=0;if("."==h){k=1,e=f+1+k;break}var l=d.some(function(b){if(1==b.length){if(h==b)return k=1,!0}else{if(a.substring(f,f+b.length)==b)return k=b.length,!0;if(a.substring(f-b.length+1,f+1)==b)return k=-b.length,!0}});l||/^\w$/.test(h)||(e=f+1+k)}break}}return e>b&&(e=b),a=a.substring(e,b).trim(),a.length>0?(c=a.split("."),""===c[c.length-1]&&(c[c.length-1]="/")):c=["/"],c},g=function(b,c){var f=null,g=a,i=function(a,b){""===a[0]&&(a=d(a),a.shift());var c=[],e=null,f=null;if(1===a.length)e=b,"/"!=a[0]&&(f=a[0],f=f.replace(/\*/g,"\\*"),f=f.replace(/\./g,"\\."),f=f.replace(/\?/g,"\\?"),f=f.replace(/\[/g,"\\["),f=f.replace(/\]/g,"\\]"),f=f.replace(/\(/g,"\\("),f=f.replace(/\)/g,"\\)"),f=f.replace(/\{/g,"\\{"),f=f.replace(/\}/g,"\\}"),f=f.replace(/\^/g,"\\^"),f=f.replace(/\$/g,"\\$"));else if(a.length>1){"/"!=a[a.length-1]&&(f=a[a.length-1],f=f.replace(/\|/g,"\\|"),f=f.replace(/\*/g,"\\*"),f=f.replace(/\./g,"\\."),f=f.replace(/\?/g,"\\?"),f=f.replace(/\[/g,"\\["),f=f.replace(/\]/g,"\\]"),f=f.replace(/\(/g,"\\("),f=f.replace(/\)/g,"\\)"),f=f.replace(/\{/g,"\\{"),f=f.replace(/\}/g,"\\}"),f=f.replace(/\^/g,"\\^"),f=f.replace(/\$/g,"\\$")),a=d(a),a.pop();for(var g=b,h=0;h<a.length;h++)try{g=g[a[h]]}catch(i){g=null}e=g}if(null!==e){if("object"==typeof e){var j=new RegExp("^"+f,"i");$.each(e,function(a){(null===f||j.test(a))&&c.push(a)})}else if("array"==typeof e){var j=new RegExp("^"+f,"i");$.each(e,function(a,b){("string"==typeof b||"number"==typeof b)&&(b=b.toString(),b.length>0&&(null===f||j.test(b))&&c.push(b.toString()))})}c.sort()}return c};f=i(b,g);var j=f;if(1==b.length&&("/"==b[b.length-1]||0==j.length))for(var k=h(c),l=0;l<k.length;l++){for(var m=k[l],n=!1||b[b.length-1]==m,o=0;!n&&o<j.length;)m==j[o]&&(n=!0),o+=1;if(!n)if("/"==b[b.length-1])j.push(m);else{var p=b[b.length-1];m.substring(0,p.length)==p&&j.push(m)}}return f},h=function(a){var b=[],d=function(a,b,c){for(var d=[],e=0;e<a.length;e++)for(var f=a[e].split(b),g=0;g<f.length;g++)f[g].length>3&&d.push(c===!0&&g>0?b+f[g]:f[g]);return d};return a=a.replace(/[^\w\$\#\.]/g," "),a=d([a]," ",!1),a=d(a,"$",!0),a=d(a,"#",!0),b=a,b.sort(),b=c([],b)};CodeMirror.entandoHint=e,CodeMirror.registerHelper("hint","velocity",e)}();